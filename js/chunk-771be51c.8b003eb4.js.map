{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/identity/IdentityForm.js","webpack:///./node_modules/tabbable/dist/index.esm.js","webpack:///./node_modules/focus-trap/dist/focus-trap.esm.js","webpack:///./node_modules/@arcgis/core/identity/IdentityModal.js","webpack:///./node_modules/@arcgis/core/identity/OAuthCredential.js","webpack:///./node_modules/@arcgis/core/identity/OAuthInfo.js","webpack:///./node_modules/@arcgis/core/identity/ServerInfo.js","webpack:///./node_modules/@arcgis/core/identity/IdentityManagerBase.js","webpack:///./node_modules/@arcgis/core/identity/IdentityManager.js"],"names":["base","group","label","footer","esriInput","esriButton","esriButtonSecondary","s","e","super","this","_usernameInputNode","_passwordInputNode","messages","signingIn","server","resource","error","oAuthPrompt","t","o","n","p","d","class","oAuthInfo","info","test","lblItem","c","key","lblUser","value","required","autocomplete","spellcheck","type","bind","afterCreate","m","lblPwd","h","classes","disabled","lblSigning","lblOk","lblCancel","onclick","_cancel","g","details","httpStatus","invalidUser","noAuthService","onsubmit","_submit","_set","emit","preventDefault","username","password","prototype","candidateSelectors","candidateSelector","join","NoElement","Element","matches","msMatchesSelector","webkitMatchesSelector","getRootNode","element","ownerDocument","getCandidates","el","includeContainer","filter","candidates","Array","slice","apply","querySelectorAll","call","unshift","getCandidatesIteratively","elements","options","elementsToCheck","from","length","shift","tagName","assigned","assignedElements","content","children","nestedCandidates","flatten","push","scope","validCandidate","includes","shadowRoot","getShadowRoot","validShadowRoot","shadowRootFilter","_nestedCandidates","getTabindex","node","isScope","tabIndex","isContentEditable","isNaN","parseInt","getAttribute","sortOrderedTabbables","a","b","documentOrder","isInput","isHiddenInput","isDetailsWithSummary","r","some","child","getCheckedRadio","nodes","form","i","checked","isTabbableRadio","name","radioSet","radioScope","queryRadios","window","CSS","escape","err","console","message","isRadio","isNonTabbableRadio","isZeroArea","_node$getBoundingClie","getBoundingClientRect","width","height","isHidden","_ref","displayCheck","getComputedStyle","visibility","isDirectSummary","nodeUnderDetails","parentElement","nodeRootHost","host","nodeIsAttached","contains","originalNode","rootNode","assignedSlot","getClientRects","isDisabledFromFieldset","parentNode","item","isNodeMatchingSelectorFocusable","isNodeMatchingSelectorTabbable","isValidShadowRootTabbable","shadowHostNode","sortByOrder","regularTabbables","orderedTabbables","forEach","candidateTabindex","sort","reduce","acc","sortable","concat","tabbable","focusable","isTabbable","Error","focusableCandidateSelector","isFocusable","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","_objectSpread2","target","arguments","source","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","configurable","writable","activeFocusTraps","trapQueue","activateTrap","trap","activeTrap","pause","trapIndex","indexOf","splice","deactivateTrap","unpause","isSelectableInput","toLowerCase","select","isEscapeEvent","keyCode","isTabEvent","delay","fn","setTimeout","findIndex","arr","idx","every","valueOrHandler","_len","params","_key","getActualTarget","event","composedPath","userOptions","doc","document","config","returnFocusOnDeactivate","escapeDeactivates","delayInitialFocus","state","containers","tabbableGroups","nodeFocusedBeforeActivation","mostRecentlyFocusedNode","active","paused","delayInitialFocusTimer","undefined","getOption","configOverrideOptions","optionName","configOptionName","containersContain","container","getNodeForOption","optionValue","_len2","_key2","querySelector","getInitialFocusNode","activeElement","firstTabbableGroup","firstTabbableNode","updateTabbableNodes","map","tabbableNodes","focusableNodes","lastTabbableNode","nextTabbableNode","forward","nodeIdx","find","reverse","tryFocus","focus","preventScroll","getReturnFocusNode","previousActiveElement","checkPointerDown","clickOutsideDeactivates","deactivate","returnFocus","allowOutsideClick","checkFocusIn","targetContained","Document","stopImmediatePropagation","checkTab","destinationNode","containerIndex","containerGroup","shiftKey","startOfGroupIndex","_ref2","destinationGroupIndex","destinationGroup","lastOfGroupIndex","_ref3","_destinationGroupIndex","_destinationGroup","checkKey","checkClick","addListeners","addEventListener","capture","passive","removeListeners","removeEventListener","activate","activateOptions","onActivate","onPostActivate","checkCanFocusTrap","finishActivation","then","deactivateOptions","clearTimeout","onDeactivate","onPostDeactivate","checkCanReturnFocus","finishDeactivation","updateContainerElements","containerElements","elementsAsArray","Boolean","open","closed","title","dialog","closeButton","iconClose","createElement","_close","body","appendChild","own","watch","_toggleFocusTrap","_destroyFocusTrap","id","close","u","role","_createFocusTrap","_renderContent","_focusTrap","requestAnimationFrame","initialFocus","cancelAnimationFrame","innerHTML","render","HTMLElement","_attachToNode","readOnly","aliasOf","storage","appId","expires","ssl","token","userId","_init","Date","now","minTimeUntilExpiration","_load","authNamespace","portalUrl","setItem","JSON","stringify","log","replace","FormData","append","navigator","sendBeacon","XMLHttpRequest","send","_oAuthCred","getItem","parse","declaredClass","expiration","forceLogin","forceUserId","locale","popup","popupCallbackUrl","popupWindowFeatures","preserveUrlHash","fromJSON","toJSON","json","write","adminTokenServiceUrl","currentVersion","hasPortal","hasServer","owningSystemUrl","owningTenant","shortLivedTokenValidity","tokenServiceUrl","webTierAuth","T","O","R","P","localStorage","sessionStorage","_portalConfig","globalThis","esriGeowConfig","serverInfos","oAuthInfos","credentials","_soReqs","_xoReqs","_portals","defaultOAuthInfo","defaultTokenValidity","formConstructor","tokenValidity","normalizeWebTierAuth","_appOrigin","origin","location","_appUrlObj","href","_busy","_rejectOnPersistedPageShow","_oAuthHash","_gwTokenUrl","_agsRest","_agsPortal","_agsAdmin","_adminSvcs","_gwDomains","regex","customBaseUrl","_legacyFed","_regexSDirUrl","_regexServerType","_gwUser","_gwItem","_gwGroup","_rePortalTokenSvc","_createDefaultOAuthInfo","_hasTestedIfAppIsOnPortal","_getOAuthHash","_pageShowHandler","findServerInfo","findOAuthInfo","_sanitizeUrl","_isServerRsrc","_getServerInstanceRoot","_getTokenSvcUrl","registerServers","_findCredential","assign","D","resources","emitTokenChange","refreshServerTokens","registerOAuthInfos","_hasSameServerInstance","_getIdenticalSvcIdx","prompt","AbortController","signal","abort","reject","promise","_isAdminResource","findCredential","destroy","resolve","f","_restInfoPms","_selfReq","selfDfd","_getPortalSelf","_enqueue","_isRESTService","l","isAdmin","serverUrl","customParameters","scheme","uri","port","v","query","request","referer","client","method","authMode","useProxy","_useProxy","ioArgs","withCredentials","data","validity","checkAppAccess","credential","getCredential","_doPortalSignIn","force","client_id","valid","viewOnlyUserTypeApp","catch","viewOnly","_oAuthDfd","clearInterval","_oAuthIntervalId","_oAuthOnHashHandle","remove","charAt","substring","error_description","sinfo_","oinfo_","access_token","Number","expires_in","persist","save","_oAuthRedirectFunc","_protocolFunc","getResourceName","on","generateToken","oAuthWin_","resUrl_","oAuthPopupConfirmation","_doOAuthSignIn","_","_postMessageAuthHandle","endsWith","postMessage","hash","hasOwnProperty","persisted","isBusy","_errbackFunc","_addResource","_removeResource","_isIdProvider","_isPortalDomain","String","search","substr","_normalizeAGOLorgDomain","proxyUrl","path","_getSuffix","restBaseUrl","_isIdenticalService","adminUrl","_getOrigin","headers","Promise","allSSL","portalMode","supportsOAuth","startsWith","trim","resourceUrl","serverInfo","options_","admin_","refresh_","_doSignIn","creationTime","_findOAuthInfo","parent","isValid","_pendingDfd","_exchangeToken","oAuthState","oAuthSignIn","_getPlatformSelf","_checkProtocol","signIn","user","portalToken","tokenExpiration","parseFloat","_generateOAuthInfo","accountId","redirect_uri","clone","urlKey","top","response_type","force_login","prepopulatedusername","redirectToUserOrgUrl","setInterval","setOAuthResponseHash","detail","authorizeParams","authorizeUrl","EventedAccessor","tokenRefreshBuffer","_enqueued","refreshToken","_refreshTimer","_startRefreshTimer"],"mappings":"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","file":"js/chunk-771be51c.8b003eb4.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";import{substitute as r}from\"../intl/substitute.js\";import o from\"../widgets/Widget.js\";import{storeNode as i}from\"../widgets/support/widgetUtils.js\";import{messageBundle as n}from\"../widgets/support/decorators/messageBundle.js\";import\"../core/Logger.js\";import{tsx as u}from\"../widgets/support/jsxFactory.js\";const a={base:\"esri-identity-form\",group:\"esri-identity-form__group\",label:\"esri-identity-form__label\",footer:\"esri-identity-form__footer\",esriInput:\"esri-input\",esriButton:\"esri-button\",esriButtonSecondary:\"esri-button--secondary\"},l=\"ArcGIS Online\";let p=class extends o{constructor(s,e){super(s,e),this._usernameInputNode=null,this._passwordInputNode=null,this.messages=null,this.signingIn=!1,this.server=null,this.resource=null,this.error=null,this.oAuthPrompt=!1}render(){const{error:s,server:e,resource:t,signingIn:o,oAuthPrompt:n,messages:p}=this,d=u(\"div\",{class:a.group},r(n?p.oAuthInfo:p.info,{server:/\\.arcgis\\.com/i.test(e)?l:e,resource:`(${t||p.lblItem})`})),c=n?null:u(\"div\",{class:a.group,key:\"username\"},u(\"label\",{class:a.label},p.lblUser,u(\"input\",{value:\"\",required:!0,autocomplete:\"off\",spellcheck:!1,type:\"text\",bind:this,afterCreate:i,\"data-node-ref\":\"_usernameInputNode\",class:a.esriInput}))),m=n?null:u(\"div\",{class:a.group,key:\"password\"},u(\"label\",{class:a.label},p.lblPwd,u(\"input\",{value:\"\",required:!0,type:\"password\",bind:this,afterCreate:i,\"data-node-ref\":\"_passwordInputNode\",class:a.esriInput}))),h=u(\"div\",{class:this.classes(a.group,a.footer)},u(\"input\",{type:\"submit\",disabled:!!o,value:o?p.lblSigning:p.lblOk,class:a.esriButton}),u(\"input\",{type:\"button\",value:p.lblCancel,bind:this,onclick:this._cancel,class:this.classes(a.esriButton,a.esriButtonSecondary)})),g=s?u(\"div\",null,s.details&&s.details.httpStatus?p.invalidUser:p.noAuthService):null;return u(\"form\",{class:a.base,bind:this,onsubmit:this._submit},d,g,c,m,h)}_cancel(){this._set(\"signingIn\",!1),this._usernameInputNode&&(this._usernameInputNode.value=\"\"),this._passwordInputNode&&(this._passwordInputNode.value=\"\"),this.emit(\"cancel\")}_submit(s){s.preventDefault(),this._set(\"signingIn\",!0);const e=this.oAuthPrompt?{}:{username:this._usernameInputNode&&this._usernameInputNode.value,password:this._passwordInputNode&&this._passwordInputNode.value};this.emit(\"submit\",e)}};s([e(),n(\"esri/identity/t9n/identity\")],p.prototype,\"messages\",void 0),s([e()],p.prototype,\"signingIn\",void 0),s([e()],p.prototype,\"server\",void 0),s([e()],p.prototype,\"resource\",void 0),s([e()],p.prototype,\"error\",void 0),s([e()],p.prototype,\"oAuthPrompt\",void 0),p=s([t(\"esri.identity.IdentityForm\")],p);const d=p;export{d as default};\n","/*!\n* tabbable 5.3.3\n* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE\n*/\nvar candidateSelectors = ['input', 'select', 'textarea', 'a[href]', 'button', '[tabindex]:not(slot)', 'audio[controls]', 'video[controls]', '[contenteditable]:not([contenteditable=\"false\"])', 'details>summary:first-of-type', 'details'];\nvar candidateSelector = /* #__PURE__ */candidateSelectors.join(',');\nvar NoElement = typeof Element === 'undefined';\nvar matches = NoElement ? function () {} : Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\nvar getRootNode = !NoElement && Element.prototype.getRootNode ? function (element) {\n  return element.getRootNode();\n} : function (element) {\n  return element.ownerDocument;\n};\n/**\n * @param {Element} el container to check in\n * @param {boolean} includeContainer add container to check\n * @param {(node: Element) => boolean} filter filter candidates\n * @returns {Element[]}\n */\n\nvar getCandidates = function getCandidates(el, includeContainer, filter) {\n  var candidates = Array.prototype.slice.apply(el.querySelectorAll(candidateSelector));\n\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n\n  candidates = candidates.filter(filter);\n  return candidates;\n};\n/**\n * @callback GetShadowRoot\n * @param {Element} element to check for shadow root\n * @returns {ShadowRoot|boolean} ShadowRoot if available or boolean indicating if a shadowRoot is attached but not available.\n */\n\n/**\n * @callback ShadowRootFilter\n * @param {Element} shadowHostNode the element which contains shadow content\n * @returns {boolean} true if a shadow root could potentially contain valid candidates.\n */\n\n/**\n * @typedef {Object} CandidatesScope\n * @property {Element} scope contains inner candidates\n * @property {Element[]} candidates\n */\n\n/**\n * @typedef {Object} IterativeOptions\n * @property {GetShadowRoot|boolean} getShadowRoot true if shadow support is enabled; falsy if not;\n *  if a function, implies shadow support is enabled and either returns the shadow root of an element\n *  or a boolean stating if it has an undisclosed shadow root\n * @property {(node: Element) => boolean} filter filter candidates\n * @property {boolean} flatten if true then result will flatten any CandidatesScope into the returned list\n * @property {ShadowRootFilter} shadowRootFilter filter shadow roots;\n */\n\n/**\n * @param {Element[]} elements list of element containers to match candidates from\n * @param {boolean} includeContainer add container list to check\n * @param {IterativeOptions} options\n * @returns {Array.<Element|CandidatesScope>}\n */\n\n\nvar getCandidatesIteratively = function getCandidatesIteratively(elements, includeContainer, options) {\n  var candidates = [];\n  var elementsToCheck = Array.from(elements);\n\n  while (elementsToCheck.length) {\n    var element = elementsToCheck.shift();\n\n    if (element.tagName === 'SLOT') {\n      // add shadow dom slot scope (slot itself cannot be focusable)\n      var assigned = element.assignedElements();\n      var content = assigned.length ? assigned : element.children;\n      var nestedCandidates = getCandidatesIteratively(content, true, options);\n\n      if (options.flatten) {\n        candidates.push.apply(candidates, nestedCandidates);\n      } else {\n        candidates.push({\n          scope: element,\n          candidates: nestedCandidates\n        });\n      }\n    } else {\n      // check candidate element\n      var validCandidate = matches.call(element, candidateSelector);\n\n      if (validCandidate && options.filter(element) && (includeContainer || !elements.includes(element))) {\n        candidates.push(element);\n      } // iterate over shadow content if possible\n\n\n      var shadowRoot = element.shadowRoot || // check for an undisclosed shadow\n      typeof options.getShadowRoot === 'function' && options.getShadowRoot(element);\n      var validShadowRoot = !options.shadowRootFilter || options.shadowRootFilter(element);\n\n      if (shadowRoot && validShadowRoot) {\n        // add shadow dom scope IIF a shadow root node was given; otherwise, an undisclosed\n        //  shadow exists, so look at light dom children as fallback BUT create a scope for any\n        //  child candidates found because they're likely slotted elements (elements that are\n        //  children of the web component element (which has the shadow), in the light dom, but\n        //  slotted somewhere _inside_ the undisclosed shadow) -- the scope is created below,\n        //  _after_ we return from this recursive call\n        var _nestedCandidates = getCandidatesIteratively(shadowRoot === true ? element.children : shadowRoot.children, true, options);\n\n        if (options.flatten) {\n          candidates.push.apply(candidates, _nestedCandidates);\n        } else {\n          candidates.push({\n            scope: element,\n            candidates: _nestedCandidates\n          });\n        }\n      } else {\n        // there's not shadow so just dig into the element's (light dom) children\n        //  __without__ giving the element special scope treatment\n        elementsToCheck.unshift.apply(elementsToCheck, element.children);\n      }\n    }\n  }\n\n  return candidates;\n};\n\nvar getTabindex = function getTabindex(node, isScope) {\n  if (node.tabIndex < 0) {\n    // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default\n    // `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n    // yet they are still part of the regular tab order; in FF, they get a default\n    // `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n    // order, consider their tab index to be 0.\n    // Also browsers do not return `tabIndex` correctly for contentEditable nodes;\n    // so if they don't have a tabindex attribute specifically set, assume it's 0.\n    //\n    // isScope is positive for custom element with shadow root or slot that by default\n    // have tabIndex -1, but need to be sorted by document order in order for their\n    // content to be inserted in the correct position\n    if ((isScope || /^(AUDIO|VIDEO|DETAILS)$/.test(node.tagName) || node.isContentEditable) && isNaN(parseInt(node.getAttribute('tabindex'), 10))) {\n      return 0;\n    }\n  }\n\n  return node.tabIndex;\n};\n\nvar sortOrderedTabbables = function sortOrderedTabbables(a, b) {\n  return a.tabIndex === b.tabIndex ? a.documentOrder - b.documentOrder : a.tabIndex - b.tabIndex;\n};\n\nvar isInput = function isInput(node) {\n  return node.tagName === 'INPUT';\n};\n\nvar isHiddenInput = function isHiddenInput(node) {\n  return isInput(node) && node.type === 'hidden';\n};\n\nvar isDetailsWithSummary = function isDetailsWithSummary(node) {\n  var r = node.tagName === 'DETAILS' && Array.prototype.slice.apply(node.children).some(function (child) {\n    return child.tagName === 'SUMMARY';\n  });\n  return r;\n};\n\nvar getCheckedRadio = function getCheckedRadio(nodes, form) {\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n};\n\nvar isTabbableRadio = function isTabbableRadio(node) {\n  if (!node.name) {\n    return true;\n  }\n\n  var radioScope = node.form || getRootNode(node);\n\n  var queryRadios = function queryRadios(name) {\n    return radioScope.querySelectorAll('input[type=\"radio\"][name=\"' + name + '\"]');\n  };\n\n  var radioSet;\n\n  if (typeof window !== 'undefined' && typeof window.CSS !== 'undefined' && typeof window.CSS.escape === 'function') {\n    radioSet = queryRadios(window.CSS.escape(node.name));\n  } else {\n    try {\n      radioSet = queryRadios(node.name);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error('Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s', err.message);\n      return false;\n    }\n  }\n\n  var checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n};\n\nvar isRadio = function isRadio(node) {\n  return isInput(node) && node.type === 'radio';\n};\n\nvar isNonTabbableRadio = function isNonTabbableRadio(node) {\n  return isRadio(node) && !isTabbableRadio(node);\n};\n\nvar isZeroArea = function isZeroArea(node) {\n  var _node$getBoundingClie = node.getBoundingClientRect(),\n      width = _node$getBoundingClie.width,\n      height = _node$getBoundingClie.height;\n\n  return width === 0 && height === 0;\n};\n\nvar isHidden = function isHidden(node, _ref) {\n  var displayCheck = _ref.displayCheck,\n      getShadowRoot = _ref.getShadowRoot;\n\n  // NOTE: visibility will be `undefined` if node is detached from the document\n  //  (see notes about this further down), which means we will consider it visible\n  //  (this is legacy behavior from a very long way back)\n  // NOTE: we check this regardless of `displayCheck=\"none\"` because this is a\n  //  _visibility_ check, not a _display_ check\n  if (getComputedStyle(node).visibility === 'hidden') {\n    return true;\n  }\n\n  var isDirectSummary = matches.call(node, 'details>summary:first-of-type');\n  var nodeUnderDetails = isDirectSummary ? node.parentElement : node;\n\n  if (matches.call(nodeUnderDetails, 'details:not([open]) *')) {\n    return true;\n  } // The root node is the shadow root if the node is in a shadow DOM; some document otherwise\n  //  (but NOT _the_ document; see second 'If' comment below for more).\n  // If rootNode is shadow root, it'll have a host, which is the element to which the shadow\n  //  is attached, and the one we need to check if it's in the document or not (because the\n  //  shadow, and all nodes it contains, is never considered in the document since shadows\n  //  behave like self-contained DOMs; but if the shadow's HOST, which is part of the document,\n  //  is hidden, or is not in the document itself but is detached, it will affect the shadow's\n  //  visibility, including all the nodes it contains). The host could be any normal node,\n  //  or a custom element (i.e. web component). Either way, that's the one that is considered\n  //  part of the document, not the shadow root, nor any of its children (i.e. the node being\n  //  tested).\n  // If rootNode is not a shadow root, it won't have a host, and so rootNode should be the\n  //  document (per the docs) and while it's a Document-type object, that document does not\n  //  appear to be the same as the node's `ownerDocument` for some reason, so it's safer\n  //  to ignore the rootNode at this point, and use `node.ownerDocument`. Otherwise,\n  //  using `rootNode.contains(node)` will _always_ be true we'll get false-positives when\n  //  node is actually detached.\n\n\n  var nodeRootHost = getRootNode(node).host;\n  var nodeIsAttached = (nodeRootHost === null || nodeRootHost === void 0 ? void 0 : nodeRootHost.ownerDocument.contains(nodeRootHost)) || node.ownerDocument.contains(node);\n\n  if (!displayCheck || displayCheck === 'full') {\n    if (typeof getShadowRoot === 'function') {\n      // figure out if we should consider the node to be in an undisclosed shadow and use the\n      //  'non-zero-area' fallback\n      var originalNode = node;\n\n      while (node) {\n        var parentElement = node.parentElement;\n        var rootNode = getRootNode(node);\n\n        if (parentElement && !parentElement.shadowRoot && getShadowRoot(parentElement) === true // check if there's an undisclosed shadow\n        ) {\n          // node has an undisclosed shadow which means we can only treat it as a black box, so we\n          //  fall back to a non-zero-area test\n          return isZeroArea(node);\n        } else if (node.assignedSlot) {\n          // iterate up slot\n          node = node.assignedSlot;\n        } else if (!parentElement && rootNode !== node.ownerDocument) {\n          // cross shadow boundary\n          node = rootNode.host;\n        } else {\n          // iterate up normal dom\n          node = parentElement;\n        }\n      }\n\n      node = originalNode;\n    } // else, `getShadowRoot` might be true, but all that does is enable shadow DOM support\n    //  (i.e. it does not also presume that all nodes might have undisclosed shadows); or\n    //  it might be a falsy value, which means shadow DOM support is disabled\n    // Since we didn't find it sitting in an undisclosed shadow (or shadows are disabled)\n    //  now we can just test to see if it would normally be visible or not, provided it's\n    //  attached to the main document.\n    // NOTE: We must consider case where node is inside a shadow DOM and given directly to\n    //  `isTabbable()` or `isFocusable()` -- regardless of `getShadowRoot` option setting.\n\n\n    if (nodeIsAttached) {\n      // this works wherever the node is: if there's at least one client rect, it's\n      //  somehow displayed; it also covers the CSS 'display: contents' case where the\n      //  node itself is hidden in place of its contents; and there's no need to search\n      //  up the hierarchy either\n      return !node.getClientRects().length;\n    } // Else, the node isn't attached to the document, which means the `getClientRects()`\n    //  API will __always__ return zero rects (this can happen, for example, if React\n    //  is used to render nodes onto a detached tree, as confirmed in this thread:\n    //  https://github.com/facebook/react/issues/9117#issuecomment-284228870)\n    //\n    // It also means that even window.getComputedStyle(node).display will return `undefined`\n    //  because styles are only computed for nodes that are in the document.\n    //\n    // NOTE: THIS HAS BEEN THE CASE FOR YEARS. It is not new, nor is it caused by tabbable\n    //  somehow. Though it was never stated officially, anyone who has ever used tabbable\n    //  APIs on nodes in detached containers has actually implicitly used tabbable in what\n    //  was later (as of v5.2.0 on Apr 9, 2021) called `displayCheck=\"none\"` mode -- essentially\n    //  considering __everything__ to be visible because of the innability to determine styles.\n\n  } else if (displayCheck === 'non-zero-area') {\n    // NOTE: Even though this tests that the node's client rect is non-zero to determine\n    //  whether it's displayed, and that a detached node will __always__ have a zero-area\n    //  client rect, we don't special-case for whether the node is attached or not. In\n    //  this mode, we do want to consider nodes that have a zero area to be hidden at all\n    //  times, and that includes attached or not.\n    return isZeroArea(node);\n  } // visible, as far as we can tell, or per current `displayCheck` mode\n\n\n  return false;\n}; // form fields (nested) inside a disabled fieldset are not focusable/tabbable\n//  unless they are in the _first_ <legend> element of the top-most disabled\n//  fieldset\n\n\nvar isDisabledFromFieldset = function isDisabledFromFieldset(node) {\n  if (/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(node.tagName)) {\n    var parentNode = node.parentElement; // check if `node` is contained in a disabled <fieldset>\n\n    while (parentNode) {\n      if (parentNode.tagName === 'FIELDSET' && parentNode.disabled) {\n        // look for the first <legend> among the children of the disabled <fieldset>\n        for (var i = 0; i < parentNode.children.length; i++) {\n          var child = parentNode.children.item(i); // when the first <legend> (in document order) is found\n\n          if (child.tagName === 'LEGEND') {\n            // if its parent <fieldset> is not nested in another disabled <fieldset>,\n            // return whether `node` is a descendant of its first <legend>\n            return matches.call(parentNode, 'fieldset[disabled] *') ? true : !child.contains(node);\n          }\n        } // the disabled <fieldset> containing `node` has no <legend>\n\n\n        return true;\n      }\n\n      parentNode = parentNode.parentElement;\n    }\n  } // else, node's tabbable/focusable state should not be affected by a fieldset's\n  //  enabled/disabled state\n\n\n  return false;\n};\n\nvar isNodeMatchingSelectorFocusable = function isNodeMatchingSelectorFocusable(options, node) {\n  if (node.disabled || isHiddenInput(node) || isHidden(node, options) || // For a details element with a summary, the summary element gets the focus\n  isDetailsWithSummary(node) || isDisabledFromFieldset(node)) {\n    return false;\n  }\n\n  return true;\n};\n\nvar isNodeMatchingSelectorTabbable = function isNodeMatchingSelectorTabbable(options, node) {\n  if (isNonTabbableRadio(node) || getTabindex(node) < 0 || !isNodeMatchingSelectorFocusable(options, node)) {\n    return false;\n  }\n\n  return true;\n};\n\nvar isValidShadowRootTabbable = function isValidShadowRootTabbable(shadowHostNode) {\n  var tabIndex = parseInt(shadowHostNode.getAttribute('tabindex'), 10);\n\n  if (isNaN(tabIndex) || tabIndex >= 0) {\n    return true;\n  } // If a custom element has an explicit negative tabindex,\n  // browsers will not allow tab targeting said element's children.\n\n\n  return false;\n};\n/**\n * @param {Array.<Element|CandidatesScope>} candidates\n * @returns Element[]\n */\n\n\nvar sortByOrder = function sortByOrder(candidates) {\n  var regularTabbables = [];\n  var orderedTabbables = [];\n  candidates.forEach(function (item, i) {\n    var isScope = !!item.scope;\n    var element = isScope ? item.scope : item;\n    var candidateTabindex = getTabindex(element, isScope);\n    var elements = isScope ? sortByOrder(item.candidates) : element;\n\n    if (candidateTabindex === 0) {\n      isScope ? regularTabbables.push.apply(regularTabbables, elements) : regularTabbables.push(element);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        item: item,\n        isScope: isScope,\n        content: elements\n      });\n    }\n  });\n  return orderedTabbables.sort(sortOrderedTabbables).reduce(function (acc, sortable) {\n    sortable.isScope ? acc.push.apply(acc, sortable.content) : acc.push(sortable.content);\n    return acc;\n  }, []).concat(regularTabbables);\n};\n\nvar tabbable = function tabbable(el, options) {\n  options = options || {};\n  var candidates;\n\n  if (options.getShadowRoot) {\n    candidates = getCandidatesIteratively([el], options.includeContainer, {\n      filter: isNodeMatchingSelectorTabbable.bind(null, options),\n      flatten: false,\n      getShadowRoot: options.getShadowRoot,\n      shadowRootFilter: isValidShadowRootTabbable\n    });\n  } else {\n    candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorTabbable.bind(null, options));\n  }\n\n  return sortByOrder(candidates);\n};\n\nvar focusable = function focusable(el, options) {\n  options = options || {};\n  var candidates;\n\n  if (options.getShadowRoot) {\n    candidates = getCandidatesIteratively([el], options.includeContainer, {\n      filter: isNodeMatchingSelectorFocusable.bind(null, options),\n      flatten: true,\n      getShadowRoot: options.getShadowRoot\n    });\n  } else {\n    candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorFocusable.bind(null, options));\n  }\n\n  return candidates;\n};\n\nvar isTabbable = function isTabbable(node, options) {\n  options = options || {};\n\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorTabbable(options, node);\n};\n\nvar focusableCandidateSelector = /* #__PURE__ */candidateSelectors.concat('iframe').join(',');\n\nvar isFocusable = function isFocusable(node, options) {\n  options = options || {};\n\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorFocusable(options, node);\n};\n\nexport { focusable, isFocusable, isTabbable, tabbable };\n//# sourceMappingURL=index.esm.js.map\n","/*!\n* focus-trap 6.7.3\n* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE\n*/\nimport { tabbable, focusable, isTabbable, isFocusable } from 'tabbable';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar activeFocusTraps = function () {\n  var trapQueue = [];\n  return {\n    activateTrap: function activateTrap(trap) {\n      if (trapQueue.length > 0) {\n        var activeTrap = trapQueue[trapQueue.length - 1];\n\n        if (activeTrap !== trap) {\n          activeTrap.pause();\n        }\n      }\n\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex === -1) {\n        trapQueue.push(trap);\n      } else {\n        // move this existing trap to the front of the queue\n        trapQueue.splice(trapIndex, 1);\n        trapQueue.push(trap);\n      }\n    },\n    deactivateTrap: function deactivateTrap(trap) {\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex !== -1) {\n        trapQueue.splice(trapIndex, 1);\n      }\n\n      if (trapQueue.length > 0) {\n        trapQueue[trapQueue.length - 1].unpause();\n      }\n    }\n  };\n}();\n\nvar isSelectableInput = function isSelectableInput(node) {\n  return node.tagName && node.tagName.toLowerCase() === 'input' && typeof node.select === 'function';\n};\n\nvar isEscapeEvent = function isEscapeEvent(e) {\n  return e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27;\n};\n\nvar isTabEvent = function isTabEvent(e) {\n  return e.key === 'Tab' || e.keyCode === 9;\n};\n\nvar delay = function delay(fn) {\n  return setTimeout(fn, 0);\n}; // Array.find/findIndex() are not supported on IE; this replicates enough\n//  of Array.findIndex() for our needs\n\n\nvar findIndex = function findIndex(arr, fn) {\n  var idx = -1;\n  arr.every(function (value, i) {\n    if (fn(value)) {\n      idx = i;\n      return false; // break\n    }\n\n    return true; // next\n  });\n  return idx;\n};\n/**\n * Get an option's value when it could be a plain value, or a handler that provides\n *  the value.\n * @param {*} value Option's value to check.\n * @param {...*} [params] Any parameters to pass to the handler, if `value` is a function.\n * @returns {*} The `value`, or the handler's returned value.\n */\n\n\nvar valueOrHandler = function valueOrHandler(value) {\n  for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    params[_key - 1] = arguments[_key];\n  }\n\n  return typeof value === 'function' ? value.apply(void 0, params) : value;\n};\n\nvar getActualTarget = function getActualTarget(event) {\n  // NOTE: If the trap is _inside_ a shadow DOM, event.target will always be the\n  //  shadow host. However, event.target.composedPath() will be an array of\n  //  nodes \"clicked\" from inner-most (the actual element inside the shadow) to\n  //  outer-most (the host HTML document). If we have access to composedPath(),\n  //  then use its first element; otherwise, fall back to event.target (and\n  //  this only works for an _open_ shadow DOM; otherwise,\n  //  composedPath()[0] === event.target always).\n  return event.target.shadowRoot && typeof event.composedPath === 'function' ? event.composedPath()[0] : event.target;\n};\n\nvar createFocusTrap = function createFocusTrap(elements, userOptions) {\n  // SSR: a live trap shouldn't be created in this type of environment so this\n  //  should be safe code to execute if the `document` option isn't specified\n  var doc = (userOptions === null || userOptions === void 0 ? void 0 : userOptions.document) || document;\n\n  var config = _objectSpread2({\n    returnFocusOnDeactivate: true,\n    escapeDeactivates: true,\n    delayInitialFocus: true\n  }, userOptions);\n\n  var state = {\n    // @type {Array<HTMLElement>}\n    containers: [],\n    // list of objects identifying the first and last tabbable nodes in all containers/groups in\n    //  the trap\n    // NOTE: it's possible that a group has no tabbable nodes if nodes get removed while the trap\n    //  is active, but the trap should never get to a state where there isn't at least one group\n    //  with at least one tabbable node in it (that would lead to an error condition that would\n    //  result in an error being thrown)\n    // @type {Array<{\n    //   container: HTMLElement,\n    //   firstTabbableNode: HTMLElement|null,\n    //   lastTabbableNode: HTMLElement|null,\n    //   nextTabbableNode: (node: HTMLElement, forward: boolean) => HTMLElement|undefined\n    // }>}\n    tabbableGroups: [],\n    nodeFocusedBeforeActivation: null,\n    mostRecentlyFocusedNode: null,\n    active: false,\n    paused: false,\n    // timer ID for when delayInitialFocus is true and initial focus in this trap\n    //  has been delayed during activation\n    delayInitialFocusTimer: undefined\n  };\n  var trap; // eslint-disable-line prefer-const -- some private functions reference it, and its methods reference private functions, so we must declare here and define later\n\n  var getOption = function getOption(configOverrideOptions, optionName, configOptionName) {\n    return configOverrideOptions && configOverrideOptions[optionName] !== undefined ? configOverrideOptions[optionName] : config[configOptionName || optionName];\n  };\n\n  var containersContain = function containersContain(element) {\n    return !!(element && state.containers.some(function (container) {\n      return container.contains(element);\n    }));\n  };\n  /**\n   * Gets the node for the given option, which is expected to be an option that\n   *  can be either a DOM node, a string that is a selector to get a node, `false`\n   *  (if a node is explicitly NOT given), or a function that returns any of these\n   *  values.\n   * @param {string} optionName\n   * @returns {undefined | false | HTMLElement | SVGElement} Returns\n   *  `undefined` if the option is not specified; `false` if the option\n   *  resolved to `false` (node explicitly not given); otherwise, the resolved\n   *  DOM node.\n   * @throws {Error} If the option is set, not `false`, and is not, or does not\n   *  resolve to a node.\n   */\n\n\n  var getNodeForOption = function getNodeForOption(optionName) {\n    var optionValue = config[optionName];\n\n    if (typeof optionValue === 'function') {\n      for (var _len2 = arguments.length, params = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        params[_key2 - 1] = arguments[_key2];\n      }\n\n      optionValue = optionValue.apply(void 0, params);\n    }\n\n    if (!optionValue) {\n      if (optionValue === undefined || optionValue === false) {\n        return optionValue;\n      } // else, empty string (invalid), null (invalid), 0 (invalid)\n\n\n      throw new Error(\"`\".concat(optionName, \"` was specified but was not a node, or did not return a node\"));\n    }\n\n    var node = optionValue; // could be HTMLElement, SVGElement, or non-empty string at this point\n\n    if (typeof optionValue === 'string') {\n      node = doc.querySelector(optionValue); // resolve to node, or null if fails\n\n      if (!node) {\n        throw new Error(\"`\".concat(optionName, \"` as selector refers to no known node\"));\n      }\n    }\n\n    return node;\n  };\n\n  var getInitialFocusNode = function getInitialFocusNode() {\n    var node = getNodeForOption('initialFocus'); // false explicitly indicates we want no initialFocus at all\n\n    if (node === false) {\n      return false;\n    }\n\n    if (node === undefined) {\n      // option not specified: use fallback options\n      if (containersContain(doc.activeElement)) {\n        node = doc.activeElement;\n      } else {\n        var firstTabbableGroup = state.tabbableGroups[0];\n        var firstTabbableNode = firstTabbableGroup && firstTabbableGroup.firstTabbableNode; // NOTE: `fallbackFocus` option function cannot return `false` (not supported)\n\n        node = firstTabbableNode || getNodeForOption('fallbackFocus');\n      }\n    }\n\n    if (!node) {\n      throw new Error('Your focus-trap needs to have at least one focusable element');\n    }\n\n    return node;\n  };\n\n  var updateTabbableNodes = function updateTabbableNodes() {\n    state.tabbableGroups = state.containers.map(function (container) {\n      var tabbableNodes = tabbable(container); // NOTE: if we have tabbable nodes, we must have focusable nodes; focusable nodes\n      //  are a superset of tabbable nodes\n\n      var focusableNodes = focusable(container);\n\n      if (tabbableNodes.length > 0) {\n        return {\n          container: container,\n          firstTabbableNode: tabbableNodes[0],\n          lastTabbableNode: tabbableNodes[tabbableNodes.length - 1],\n\n          /**\n           * Finds the __tabbable__ node that follows the given node in the specified direction,\n           *  in this container, if any.\n           * @param {HTMLElement} node\n           * @param {boolean} [forward] True if going in forward tab order; false if going\n           *  in reverse.\n           * @returns {HTMLElement|undefined} The next tabbable node, if any.\n           */\n          nextTabbableNode: function nextTabbableNode(node) {\n            var forward = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n            // NOTE: If tabindex is positive (in order to manipulate the tab order separate\n            //  from the DOM order), this __will not work__ because the list of focusableNodes,\n            //  while it contains tabbable nodes, does not sort its nodes in any order other\n            //  than DOM order, because it can't: Where would you place focusable (but not\n            //  tabbable) nodes in that order? They have no order, because they aren't tabbale...\n            // Support for positive tabindex is already broken and hard to manage (possibly\n            //  not supportable, TBD), so this isn't going to make things worse than they\n            //  already are, and at least makes things better for the majority of cases where\n            //  tabindex is either 0/unset or negative.\n            // FYI, positive tabindex issue: https://github.com/focus-trap/focus-trap/issues/375\n            var nodeIdx = focusableNodes.findIndex(function (n) {\n              return n === node;\n            });\n\n            if (forward) {\n              return focusableNodes.slice(nodeIdx + 1).find(function (n) {\n                return isTabbable(n);\n              });\n            }\n\n            return focusableNodes.slice(0, nodeIdx).reverse().find(function (n) {\n              return isTabbable(n);\n            });\n          }\n        };\n      }\n\n      return undefined;\n    }).filter(function (group) {\n      return !!group;\n    }); // remove groups with no tabbable nodes\n    // throw if no groups have tabbable nodes and we don't have a fallback focus node either\n\n    if (state.tabbableGroups.length <= 0 && !getNodeForOption('fallbackFocus') // returning false not supported for this option\n    ) {\n      throw new Error('Your focus-trap must have at least one container with at least one tabbable node in it at all times');\n    }\n  };\n\n  var tryFocus = function tryFocus(node) {\n    if (node === false) {\n      return;\n    }\n\n    if (node === doc.activeElement) {\n      return;\n    }\n\n    if (!node || !node.focus) {\n      tryFocus(getInitialFocusNode());\n      return;\n    }\n\n    node.focus({\n      preventScroll: !!config.preventScroll\n    });\n    state.mostRecentlyFocusedNode = node;\n\n    if (isSelectableInput(node)) {\n      node.select();\n    }\n  };\n\n  var getReturnFocusNode = function getReturnFocusNode(previousActiveElement) {\n    var node = getNodeForOption('setReturnFocus', previousActiveElement);\n    return node ? node : node === false ? false : previousActiveElement;\n  }; // This needs to be done on mousedown and touchstart instead of click\n  // so that it precedes the focus event.\n\n\n  var checkPointerDown = function checkPointerDown(e) {\n    var target = getActualTarget(e);\n\n    if (containersContain(target)) {\n      // allow the click since it ocurred inside the trap\n      return;\n    }\n\n    if (valueOrHandler(config.clickOutsideDeactivates, e)) {\n      // immediately deactivate the trap\n      trap.deactivate({\n        // if, on deactivation, we should return focus to the node originally-focused\n        //  when the trap was activated (or the configured `setReturnFocus` node),\n        //  then assume it's also OK to return focus to the outside node that was\n        //  just clicked, causing deactivation, as long as that node is focusable;\n        //  if it isn't focusable, then return focus to the original node focused\n        //  on activation (or the configured `setReturnFocus` node)\n        // NOTE: by setting `returnFocus: false`, deactivate() will do nothing,\n        //  which will result in the outside click setting focus to the node\n        //  that was clicked, whether it's focusable or not; by setting\n        //  `returnFocus: true`, we'll attempt to re-focus the node originally-focused\n        //  on activation (or the configured `setReturnFocus` node)\n        returnFocus: config.returnFocusOnDeactivate && !isFocusable(target)\n      });\n      return;\n    } // This is needed for mobile devices.\n    // (If we'll only let `click` events through,\n    // then on mobile they will be blocked anyways if `touchstart` is blocked.)\n\n\n    if (valueOrHandler(config.allowOutsideClick, e)) {\n      // allow the click outside the trap to take place\n      return;\n    } // otherwise, prevent the click\n\n\n    e.preventDefault();\n  }; // In case focus escapes the trap for some strange reason, pull it back in.\n\n\n  var checkFocusIn = function checkFocusIn(e) {\n    var target = getActualTarget(e);\n    var targetContained = containersContain(target); // In Firefox when you Tab out of an iframe the Document is briefly focused.\n\n    if (targetContained || target instanceof Document) {\n      if (targetContained) {\n        state.mostRecentlyFocusedNode = target;\n      }\n    } else {\n      // escaped! pull it back in to where it just left\n      e.stopImmediatePropagation();\n      tryFocus(state.mostRecentlyFocusedNode || getInitialFocusNode());\n    }\n  }; // Hijack Tab events on the first and last focusable nodes of the trap,\n  // in order to prevent focus from escaping. If it escapes for even a\n  // moment it can end up scrolling the page and causing confusion so we\n  // kind of need to capture the action at the keydown phase.\n\n\n  var checkTab = function checkTab(e) {\n    var target = getActualTarget(e);\n    updateTabbableNodes();\n    var destinationNode = null;\n\n    if (state.tabbableGroups.length > 0) {\n      // make sure the target is actually contained in a group\n      // NOTE: the target may also be the container itself if it's focusable\n      //  with tabIndex='-1' and was given initial focus\n      var containerIndex = findIndex(state.tabbableGroups, function (_ref) {\n        var container = _ref.container;\n        return container.contains(target);\n      });\n      var containerGroup = containerIndex >= 0 ? state.tabbableGroups[containerIndex] : undefined;\n\n      if (containerIndex < 0) {\n        // target not found in any group: quite possible focus has escaped the trap,\n        //  so bring it back in to...\n        if (e.shiftKey) {\n          // ...the last node in the last group\n          destinationNode = state.tabbableGroups[state.tabbableGroups.length - 1].lastTabbableNode;\n        } else {\n          // ...the first node in the first group\n          destinationNode = state.tabbableGroups[0].firstTabbableNode;\n        }\n      } else if (e.shiftKey) {\n        // REVERSE\n        // is the target the first tabbable node in a group?\n        var startOfGroupIndex = findIndex(state.tabbableGroups, function (_ref2) {\n          var firstTabbableNode = _ref2.firstTabbableNode;\n          return target === firstTabbableNode;\n        });\n\n        if (startOfGroupIndex < 0 && (containerGroup.container === target || isFocusable(target) && !isTabbable(target) && !containerGroup.nextTabbableNode(target, false))) {\n          // an exception case where the target is either the container itself, or\n          //  a non-tabbable node that was given focus (i.e. tabindex is negative\n          //  and user clicked on it or node was programmatically given focus)\n          //  and is not followed by any other tabbable node, in which\n          //  case, we should handle shift+tab as if focus were on the container's\n          //  first tabbable node, and go to the last tabbable node of the LAST group\n          startOfGroupIndex = containerIndex;\n        }\n\n        if (startOfGroupIndex >= 0) {\n          // YES: then shift+tab should go to the last tabbable node in the\n          //  previous group (and wrap around to the last tabbable node of\n          //  the LAST group if it's the first tabbable node of the FIRST group)\n          var destinationGroupIndex = startOfGroupIndex === 0 ? state.tabbableGroups.length - 1 : startOfGroupIndex - 1;\n          var destinationGroup = state.tabbableGroups[destinationGroupIndex];\n          destinationNode = destinationGroup.lastTabbableNode;\n        }\n      } else {\n        // FORWARD\n        // is the target the last tabbable node in a group?\n        var lastOfGroupIndex = findIndex(state.tabbableGroups, function (_ref3) {\n          var lastTabbableNode = _ref3.lastTabbableNode;\n          return target === lastTabbableNode;\n        });\n\n        if (lastOfGroupIndex < 0 && (containerGroup.container === target || isFocusable(target) && !isTabbable(target) && !containerGroup.nextTabbableNode(target))) {\n          // an exception case where the target is the container itself, or\n          //  a non-tabbable node that was given focus (i.e. tabindex is negative\n          //  and user clicked on it or node was programmatically given focus)\n          //  and is not followed by any other tabbable node, in which\n          //  case, we should handle tab as if focus were on the container's\n          //  last tabbable node, and go to the first tabbable node of the FIRST group\n          lastOfGroupIndex = containerIndex;\n        }\n\n        if (lastOfGroupIndex >= 0) {\n          // YES: then tab should go to the first tabbable node in the next\n          //  group (and wrap around to the first tabbable node of the FIRST\n          //  group if it's the last tabbable node of the LAST group)\n          var _destinationGroupIndex = lastOfGroupIndex === state.tabbableGroups.length - 1 ? 0 : lastOfGroupIndex + 1;\n\n          var _destinationGroup = state.tabbableGroups[_destinationGroupIndex];\n          destinationNode = _destinationGroup.firstTabbableNode;\n        }\n      }\n    } else {\n      // NOTE: the fallbackFocus option does not support returning false to opt-out\n      destinationNode = getNodeForOption('fallbackFocus');\n    }\n\n    if (destinationNode) {\n      e.preventDefault();\n      tryFocus(destinationNode);\n    } // else, let the browser take care of [shift+]tab and move the focus\n\n  };\n\n  var checkKey = function checkKey(e) {\n    if (isEscapeEvent(e) && valueOrHandler(config.escapeDeactivates, e) !== false) {\n      e.preventDefault();\n      trap.deactivate();\n      return;\n    }\n\n    if (isTabEvent(e)) {\n      checkTab(e);\n      return;\n    }\n  };\n\n  var checkClick = function checkClick(e) {\n    if (valueOrHandler(config.clickOutsideDeactivates, e)) {\n      return;\n    }\n\n    var target = getActualTarget(e);\n\n    if (containersContain(target)) {\n      return;\n    }\n\n    if (valueOrHandler(config.allowOutsideClick, e)) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  }; //\n  // EVENT LISTENERS\n  //\n\n\n  var addListeners = function addListeners() {\n    if (!state.active) {\n      return;\n    } // There can be only one listening focus trap at a time\n\n\n    activeFocusTraps.activateTrap(trap); // Delay ensures that the focused element doesn't capture the event\n    // that caused the focus trap activation.\n\n    state.delayInitialFocusTimer = config.delayInitialFocus ? delay(function () {\n      tryFocus(getInitialFocusNode());\n    }) : tryFocus(getInitialFocusNode());\n    doc.addEventListener('focusin', checkFocusIn, true);\n    doc.addEventListener('mousedown', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('touchstart', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('click', checkClick, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('keydown', checkKey, {\n      capture: true,\n      passive: false\n    });\n    return trap;\n  };\n\n  var removeListeners = function removeListeners() {\n    if (!state.active) {\n      return;\n    }\n\n    doc.removeEventListener('focusin', checkFocusIn, true);\n    doc.removeEventListener('mousedown', checkPointerDown, true);\n    doc.removeEventListener('touchstart', checkPointerDown, true);\n    doc.removeEventListener('click', checkClick, true);\n    doc.removeEventListener('keydown', checkKey, true);\n    return trap;\n  }; //\n  // TRAP DEFINITION\n  //\n\n\n  trap = {\n    activate: function activate(activateOptions) {\n      if (state.active) {\n        return this;\n      }\n\n      var onActivate = getOption(activateOptions, 'onActivate');\n      var onPostActivate = getOption(activateOptions, 'onPostActivate');\n      var checkCanFocusTrap = getOption(activateOptions, 'checkCanFocusTrap');\n\n      if (!checkCanFocusTrap) {\n        updateTabbableNodes();\n      }\n\n      state.active = true;\n      state.paused = false;\n      state.nodeFocusedBeforeActivation = doc.activeElement;\n\n      if (onActivate) {\n        onActivate();\n      }\n\n      var finishActivation = function finishActivation() {\n        if (checkCanFocusTrap) {\n          updateTabbableNodes();\n        }\n\n        addListeners();\n\n        if (onPostActivate) {\n          onPostActivate();\n        }\n      };\n\n      if (checkCanFocusTrap) {\n        checkCanFocusTrap(state.containers.concat()).then(finishActivation, finishActivation);\n        return this;\n      }\n\n      finishActivation();\n      return this;\n    },\n    deactivate: function deactivate(deactivateOptions) {\n      if (!state.active) {\n        return this;\n      }\n\n      clearTimeout(state.delayInitialFocusTimer); // noop if undefined\n\n      state.delayInitialFocusTimer = undefined;\n      removeListeners();\n      state.active = false;\n      state.paused = false;\n      activeFocusTraps.deactivateTrap(trap);\n      var onDeactivate = getOption(deactivateOptions, 'onDeactivate');\n      var onPostDeactivate = getOption(deactivateOptions, 'onPostDeactivate');\n      var checkCanReturnFocus = getOption(deactivateOptions, 'checkCanReturnFocus');\n\n      if (onDeactivate) {\n        onDeactivate();\n      }\n\n      var returnFocus = getOption(deactivateOptions, 'returnFocus', 'returnFocusOnDeactivate');\n\n      var finishDeactivation = function finishDeactivation() {\n        delay(function () {\n          if (returnFocus) {\n            tryFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation));\n          }\n\n          if (onPostDeactivate) {\n            onPostDeactivate();\n          }\n        });\n      };\n\n      if (returnFocus && checkCanReturnFocus) {\n        checkCanReturnFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation)).then(finishDeactivation, finishDeactivation);\n        return this;\n      }\n\n      finishDeactivation();\n      return this;\n    },\n    pause: function pause() {\n      if (state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = true;\n      removeListeners();\n      return this;\n    },\n    unpause: function unpause() {\n      if (!state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = false;\n      updateTabbableNodes();\n      addListeners();\n      return this;\n    },\n    updateContainerElements: function updateContainerElements(containerElements) {\n      var elementsAsArray = [].concat(containerElements).filter(Boolean);\n      state.containers = elementsAsArray.map(function (element) {\n        return typeof element === 'string' ? doc.querySelector(element) : element;\n      });\n\n      if (state.active) {\n        updateTabbableNodes();\n      }\n\n      return this;\n    }\n  }; // initialize container elements\n\n  trap.updateContainerElements(elements);\n  return trap;\n};\n\nexport { createFocusTrap };\n//# sourceMappingURL=focus-trap.esm.js.map\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import{makeHandle as e}from\"../core/handleUtils.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import i from\"../widgets/Widget.js\";import{isWidget as r}from\"../widgets/support/widget.js\";import{createFocusTrap as n}from\"focus-trap\";import{messageBundle as a}from\"../widgets/support/decorators/messageBundle.js\";import{tsx as c}from\"../widgets/support/jsxFactory.js\";const l={base:\"esri-identity-modal\",open:\"esri-identity-modal--open\",closed:\"esri-identity-modal--closed\",title:\"esri-identity-modal__title\",dialog:\"esri-identity-modal__dialog\",content:\"esri-identity-modal__content\",closeButton:\"esri-identity-modal__close-button\",iconClose:\"esri-icon-close\"};let d=class extends i{constructor(t,e){super(t,e),this.container=document.createElement(\"div\"),this.content=null,this.open=!1,this._close=()=>{this.open=!1},document.body.appendChild(this.container),this.own(this.watch(\"open\",(()=>this._toggleFocusTrap())))}destroy(){this._destroyFocusTrap()}render(){const t=this.id,{open:e,content:o,title:s,messages:i}=this,r=e&&!!o,n={[l.open]:r,[l.closed]:!r},a=c(\"button\",{class:l.closeButton,\"aria-label\":i.close,title:i.close,bind:this,onclick:this._close},c(\"span\",{\"aria-hidden\":\"true\",class:l.iconClose})),d=`${t}_title`,p=`${t}_content`,u=s?c(\"h1\",{id:d,class:l.title},s):null,m=r?c(\"div\",{bind:this,class:l.dialog,role:\"dialog\",\"aria-labelledby\":d,\"aria-describedby\":p,afterCreate:this._createFocusTrap},a,u,this._renderContent(p)):null;return c(\"div\",{tabIndex:-1,class:this.classes(l.base,n)},m)}_destroyFocusTrap(){var t;null==(t=this._focusTrap)||t.deactivate({onDeactivate:null}),this._focusTrap=null}_toggleFocusTrap(){const{_focusTrap:t,open:e}=this;t&&(e?t.activate():t.deactivate())}_createFocusTrap(t){this._destroyFocusTrap();const o=requestAnimationFrame((()=>{this._focusTrap=n(t,{initialFocus:\"input\",onDeactivate:this._close}),this._toggleFocusTrap()}));this.own(e((()=>cancelAnimationFrame(o))))}_renderContent(t){const e=this.content;return\"string\"==typeof e?c(\"div\",{class:l.content,id:t,innerHTML:e}):r(e)?c(\"div\",{class:l.content,id:t},e.render()):e instanceof HTMLElement?c(\"div\",{class:l.content,id:t,bind:e,afterCreate:this._attachToNode}):null}_attachToNode(t){const e=this;t.appendChild(e)}};t([o({readOnly:!0})],d.prototype,\"container\",void 0),t([o()],d.prototype,\"content\",void 0),t([o()],d.prototype,\"open\",void 0),t([o(),a(\"esri/t9n/common\")],d.prototype,\"messages\",void 0),t([o({aliasOf:\"messages.auth.signIn\"})],d.prototype,\"title\",void 0),d=t([s(\"esri.identity.IdentityModal\")],d);const p=d;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nconst t=\"esriJSAPIOAuth\";class s{constructor(t,s){this.oAuthInfo=null,this.storage=null,this.appId=null,this.expires=null,this.ssl=null,this.token=null,this.userId=null,this.oAuthInfo=t,this.storage=s,this._init()}isValid(){let t=!1;if(this.oAuthInfo&&this.token&&this.userId){const s=Date.now();if(this.expires>s){(this.expires-s)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(t=!0)}}return t}save(){if(!this.storage)return;const s=this._load(),e=this.oAuthInfo;if(e&&e.authNamespace&&e.portalUrl){let o=s[e.authNamespace];o||(o=s[e.authNamespace]={}),o[e.portalUrl]={appId:this.appId=e.appId,expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem(t,JSON.stringify(s))}catch(i){console.log(i)}}}destroy(){const s=this._load(),e=this.oAuthInfo;if(e&&e.appId&&e.portalUrl&&this.token&&this.expires>Date.now()){const t=e.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/rest/oauth2/revokeToken\",s=new FormData;if(s.append(\"f\",\"json\"),s.append(\"auth_token\",this.token),s.append(\"client_id\",e.appId),s.append(\"token_type_hint\",\"access_token\"),\"function\"==typeof navigator.sendBeacon)navigator.sendBeacon(t,s);else{const e=new XMLHttpRequest;e.open(\"POST\",t),e.send(s)}}if(e&&e.authNamespace&&e.portalUrl&&this.storage){const o=s[e.authNamespace];if(o){delete o[e.portalUrl];try{this.storage.setItem(t,JSON.stringify(s))}catch(i){console.log(i)}}}e&&(e._oAuthCred=null,this.oAuthInfo=null)}_init(){const t=this._load(),s=this.oAuthInfo;if(s&&s.authNamespace&&s.portalUrl){let e=t[s.authNamespace];e&&(e=e[s.portalUrl],e&&(this.appId=e.appId,this.expires=e.expires,this.ssl=e.ssl,this.token=e.token,this.userId=e.userId))}}_load(){let s={};if(this.storage){const i=this.storage.getItem(t);if(i)try{s=JSON.parse(i)}catch(e){console.log(e)}}return s}}s.prototype.declaredClass=\"esri.identity.OAuthCredential\";export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import{JSONSupport as t}from\"../core/JSONSupport.js\";import{property as r}from\"../core/accessorSupport/decorators/property.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import{subclass as e}from\"../core/accessorSupport/decorators/subclass.js\";var s;let p=s=class extends t{constructor(o){super(o),this._oAuthCred=null,this.appId=null,this.authNamespace=\"/\",this.expiration=20160,this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl=\"oauth-callback.html\",this.popupWindowFeatures=\"height=490,width=800,resizable,scrollbars,status\",this.portalUrl=\"https://www.arcgis.com\",this.preserveUrlHash=!1,this.userId=null}clone(){return s.fromJSON(this.toJSON())}};o([r({json:{write:!0}})],p.prototype,\"appId\",void 0),o([r({json:{write:!0}})],p.prototype,\"authNamespace\",void 0),o([r({json:{write:!0}})],p.prototype,\"expiration\",void 0),o([r({json:{write:!0}})],p.prototype,\"forceLogin\",void 0),o([r({json:{write:!0}})],p.prototype,\"forceUserId\",void 0),o([r({json:{write:!0}})],p.prototype,\"locale\",void 0),o([r({json:{write:!0}})],p.prototype,\"minTimeUntilExpiration\",void 0),o([r({json:{write:!0}})],p.prototype,\"popup\",void 0),o([r({json:{write:!0}})],p.prototype,\"popupCallbackUrl\",void 0),o([r({json:{write:!0}})],p.prototype,\"popupWindowFeatures\",void 0),o([r({json:{write:!0}})],p.prototype,\"portalUrl\",void 0),o([r({json:{write:!0}})],p.prototype,\"preserveUrlHash\",void 0),o([r({json:{write:!0}})],p.prototype,\"userId\",void 0),p=s=o([e(\"esri.identity.OAuthInfo\")],p);const i=p;export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import{JSONSupport as r}from\"../core/JSONSupport.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";let s=class extends r{constructor(o){super(o),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null}};o([e({json:{write:!0}})],s.prototype,\"adminTokenServiceUrl\",void 0),o([e({json:{write:!0}})],s.prototype,\"currentVersion\",void 0),o([e({json:{write:!0}})],s.prototype,\"hasPortal\",void 0),o([e({json:{write:!0}})],s.prototype,\"hasServer\",void 0),o([e({json:{write:!0}})],s.prototype,\"owningSystemUrl\",void 0),o([e({json:{write:!0}})],s.prototype,\"owningTenant\",void 0),o([e({json:{write:!0}})],s.prototype,\"server\",void 0),o([e({json:{write:!0}})],s.prototype,\"shortLivedTokenValidity\",void 0),o([e({json:{write:!0}})],s.prototype,\"tokenServiceUrl\",void 0),o([e({json:{write:!0}})],s.prototype,\"webTierAuth\",void 0),s=o([t(\"esri.identity.ServerInfo\")],s);const i=s;export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../config.js\";import{id as s}from\"../kernel.js\";import r from\"../request.js\";import i from\"../core/Error.js\";import n from\"../core/Evented.js\";import{on as o}from\"../core/events.js\";import{fixJson as a}from\"../core/lang.js\";import{getDeepValue as h}from\"../core/object.js\";import{createResolver as l,onAbort as c,isAborted as d}from\"../core/promiseUtils.js\";import{Url as u,urlToObject as p,hasSameOrigin as _,queryToObject as g,normalize as f,getProxyRule as m,makeAbsolute as v,objectToQuery as S}from\"../core/urlUtils.js\";import{property as w}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import{subclass as I}from\"../core/accessorSupport/decorators/subclass.js\";import k from\"./IdentityForm.js\";import A from\"./IdentityModal.js\";import y from\"./OAuthCredential.js\";import U from\"./OAuthInfo.js\";import x from\"./ServerInfo.js\";const T={},O=e=>{const t=new u(e.owningSystemUrl).host,s=new u(e.server).host,r=/.+\\.arcgis\\.com$/i;return r.test(t)&&r.test(s)},R=(e,t)=>!!(O(e)&&t&&t.some((t=>t.test(e.server))));let b=null,P=null;try{b=window.localStorage,P=window.sessionStorage}catch{}class C extends n{constructor(){super(),this._portalConfig=globalThis.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this.defaultOAuthInfo=null,this.defaultTokenValidity=60,this.dialog=null,this.formConstructor=k,this.tokenValidity=null,this.normalizeWebTierAuth=!1,this._appOrigin=\"null\"!==window.origin?window.origin:window.location.origin,this._appUrlObj=p(window.location.href),this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthHash=null,this._gwTokenUrl=\"/sharing/rest/generateToken\",this._agsRest=\"/rest/services\",this._agsPortal=/\\/sharing(\\/|$)/i,this._agsAdmin=/(https?:\\/\\/[^\\/]+\\/[^\\/]+)\\/admin\\/?(\\/.*)?$/i,this._adminSvcs=/\\/rest\\/admin\\/services(\\/|$)/i,this._gwDomains=[{regex:/^https?:\\/\\/www\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:dev|[a-z\\d-]+\\.mapsdev)\\.arcgis\\.com/i,customBaseUrl:\"mapsdev.arcgis.com\",tokenServiceUrl:\"https://dev.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:devext|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,customBaseUrl:\"mapsdevext.arcgis.com\",tokenServiceUrl:\"https://devext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:qaext|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i,customBaseUrl:\"mapsqa.arcgis.com\",tokenServiceUrl:\"https://qaext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/[a-z\\d-]+\\.maps\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"}],this._legacyFed=[],this._regexSDirUrl=/http.+\\/rest\\/services\\/?/gi,this._regexServerType=/(\\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/gi,this._gwUser=/http.+\\/users\\/([^\\/]+)\\/?.*/i,this._gwItem=/http.+\\/items\\/([^\\/]+)\\/?.*/i,this._gwGroup=/http.+\\/groups\\/([^\\/]+)\\/?.*/i,this._rePortalTokenSvc=/\\/sharing(\\/rest)?\\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getOAuthHash(),window.addEventListener(\"pageshow\",(e=>{this._pageShowHandler(e)}))}registerServers(e){const t=this.serverInfos;t?(e=e.filter((e=>!this.findServerInfo(e.server))),this.serverInfos=t.concat(e)):this.serverInfos=e,e.forEach((e=>{e.owningSystemUrl&&this._portals.push(e.owningSystemUrl),e.hasPortal&&this._portals.push(e.server)}))}registerOAuthInfos(e){const t=this.oAuthInfos;if(t){for(const s of e){const e=this.findOAuthInfo(s.portalUrl);e&&t.splice(t.indexOf(e),1)}this.oAuthInfos=t.concat(e)}else this.oAuthInfos=e}registerToken(e){e={...e};const t=this._sanitizeUrl(e.server),s=this._isServerRsrc(t);let r,i=this.findServerInfo(t),n=!0;i||(i=new x,i.server=this._getServerInstanceRoot(t),s?i.hasServer=!0:(i.tokenServiceUrl=this._getTokenSvcUrl(t),i.hasPortal=!0),this.registerServers([i])),r=this._findCredential(t),r?(delete e.server,Object.assign(r,e),n=!1):(r=new D({userId:e.userId,server:i.server,token:e.token,expires:e.expires,ssl:e.ssl,scope:s?\"server\":\"portal\"}),r.resources=[t],this.credentials.push(r)),r.emitTokenChange(!1),n||r.refreshServerTokens()}toJSON(){return a({serverInfos:this.serverInfos.map((e=>e.toJSON())),oAuthInfos:this.oAuthInfos.map((e=>e.toJSON())),credentials:this.credentials.map((e=>e.toJSON()))})}initialize(e){if(!e)return;\"string\"==typeof e&&(e=JSON.parse(e));const t=e.serverInfos,s=e.oAuthInfos,r=e.credentials;if(t){const e=[];t.forEach((t=>{t.server&&t.tokenServiceUrl&&e.push(t.declaredClass?t:new x(t))})),e.length&&this.registerServers(e)}if(s){const e=[];s.forEach((t=>{t.appId&&e.push(t.declaredClass?t:new U(t))})),e.length&&this.registerOAuthInfos(e)}r&&r.forEach((e=>{e.server&&e.token&&e.expires&&e.expires>Date.now()&&((e=e.declaredClass?e:new D(e)).emitTokenChange(),this.credentials.push(e))}))}findServerInfo(e){let t;e=this._sanitizeUrl(e);for(const s of this.serverInfos)if(this._hasSameServerInstance(s.server,e)){t=s;break}return t}findOAuthInfo(e){let t;e=this._sanitizeUrl(e);for(const s of this.oAuthInfos)if(this._hasSameServerInstance(s.portalUrl,e)){t=s;break}return t}findCredential(e,t){let s;e=this._sanitizeUrl(e);const r=this._isServerRsrc(e)?\"server\":\"portal\";if(t){for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&t===i.userId&&i.scope===r){s=i;break}}else for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&-1!==this._getIdenticalSvcIdx(e,i)&&i.scope===r){s=i;break}return s}getCredential(e,t){let s,r,n=!0;t&&(s=!!t.token,r=t.error,n=!1!==t.prompt),t={...t},e=this._sanitizeUrl(e);const o=new AbortController,a=l();if(t.signal&&c(t.signal,(()=>{o.abort()})),c(o,(()=>{a.reject(new i(\"identity-manager:user-aborted\",\"ABORTED\"))})),d(o))return a.promise;t.signal=o.signal;const h=this._isAdminResource(e),u=s?this.findCredential(e):null;let p;if(u&&r&&r.details&&498===r.details.httpStatus)u.destroy();else if(u)return p=new i(\"identity-manager:not-authorized\",\"You are currently signed in as: '\"+u.userId+\"'. You do not have access to this resource: \"+e,{error:r}),a.reject(p),a.promise;const g=this._findCredential(e,t);if(g)return a.resolve(g),a.promise;let f=this.findServerInfo(e);if(f)!f.hasServer&&this._isServerRsrc(e)&&(f._restInfoPms=this._getTokenSvcUrl(e),f.hasServer=!0);else{const t=this._getTokenSvcUrl(e);if(!t)return p=new i(\"identity-manager:unknown-resource\",\"Unknown resource - could not find token service endpoint.\"),a.reject(p),a.promise;f=new x,f.server=this._getServerInstanceRoot(e),\"string\"==typeof t?(f.tokenServiceUrl=t,f.hasPortal=!0):(f._restInfoPms=t,f.hasServer=!0),this.registerServers([f])}return f.hasPortal&&void 0===f._selfReq&&(n||_(f.tokenServiceUrl,this._appOrigin)||this._gwDomains.some((e=>e.tokenServiceUrl===f.tokenServiceUrl)))&&(f._selfReq={owningTenant:t&&t.owningTenant,selfDfd:this._getPortalSelf(f.tokenServiceUrl.replace(this._rePortalTokenSvc,\"/sharing/rest/portals/self\"),e)}),this._enqueue(e,f,t,a,h)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"\")||\"\":this._gwUser.test(e)&&e.replace(this._gwUser,\"$1\")||this._gwItem.test(e)&&e.replace(this._gwItem,\"$1\")||this._gwGroup.test(e)&&e.replace(this._gwGroup,\"$1\")||\"\"}generateToken(e,t,s){const n=this._rePortalTokenSvc.test(e.tokenServiceUrl),o=new u(this._appOrigin),a=e.shortLivedTokenValidity;let h,l,c,d,p,g,f,m;t&&(m=this.tokenValidity||a||this.defaultTokenValidity,m>a&&a>0&&(m=a)),s&&(h=s.isAdmin,l=s.serverUrl,c=s.token,g=s.signal,f=s.ssl,e.customParameters=s.customParameters),h?d=e.adminTokenServiceUrl:(d=e.tokenServiceUrl,p=new u(d.toLowerCase()),e.webTierAuth&&null!=s&&s.serverUrl&&!f&&\"http\"===o.scheme&&(_(o.uri,d,!0)||\"https\"===p.scheme&&o.host===p.host&&\"7080\"===o.port&&\"7443\"===p.port)&&(d=d.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\")));const v={query:{request:\"getToken\",username:null==t?void 0:t.username,password:null==t?void 0:t.password,serverUrl:l,token:c,expiration:m,referer:h||n?this._appOrigin:null,client:h?\"referer\":null,f:\"json\",...e.customParameters},method:\"post\",authMode:\"anonymous\",useProxy:this._useProxy(e,s),signal:g,...null==s?void 0:s.ioArgs};n||(v.withCredentials=!1);return r(d,v).then((s=>{const r=s.data;if(!r||!r.token)return new i(\"identity-manager:authentication-failed\",\"Unable to generate token\");const n=e.server;return T[n]||(T[n]={}),t&&(T[n][t.username]=t.password),r.validity=m,r}))}isBusy(){return!!this._busy}checkSignInStatus(e){return this.checkAppAccess(e,\"\").then((e=>e.credential))}checkAppAccess(e,t,s){let n=!1;return this.getCredential(e,{prompt:!1}).then((o=>{let a;const h={f:\"json\"};if(\"portal\"===o.scope)if(t&&(this._doPortalSignIn(e)||s&&s.force))a=o.server+\"/sharing/rest/oauth2/validateAppAccess\",h.client_id=t;else{if(!o.token)return{credential:o};a=o.server+\"/sharing/rest\"}else{if(!o.token)return{credential:o};a=o.server+\"/rest/services\"}return o.token&&(h.token=o.token),r(a,{query:h,authMode:\"anonymous\"}).then((e=>{if(!1===e.data.valid)throw new i(\"identity-manager:not-authorized\",`You are currently signed in as: '${o.userId}'.`,e.data);return n=!!e.data.viewOnlyUserTypeApp,{credential:o}})).catch((e=>{if(\"identity-manager:not-authorized\"===e.name)throw e;const t=e.details&&e.details.httpStatus;if(498===t)throw o.destroy(),new i(\"identity-manager:not-authenticated\",\"User is not signed in.\");if(400===t)throw new i(\"identity-manager:invalid-request\");return{credential:o}}))})).then((e=>({credential:e.credential,viewOnly:n})))}setOAuthResponseHash(e){var t;const s=this._oAuthDfd;if(this._oAuthDfd=null,!s||!e)return;clearInterval(this._oAuthIntervalId),null==(t=this._oAuthOnHashHandle)||t.remove(),\"#\"===e.charAt(0)&&(e=e.substring(1));const r=g(e);if(r.error){const e=\"access_denied\"===r.error,t=new i(e?\"identity-manager:user-aborted\":\"identity-manager:authentication-failed\",e?\"ABORTED\":\"OAuth: \"+r.error+\" - \"+r.error_description);s.reject(t)}else{const e=s.sinfo_,t=s.oinfo_,i=t._oAuthCred,n=new D({userId:r.username,server:e.server,token:r.access_token,expires:Date.now()+1e3*Number(r.expires_in),ssl:\"true\"===r.ssl,_oAuthCred:i});t.userId=n.userId,i.storage=r.persist?b:P,i.token=n.token,i.expires=n.expires,i.userId=n.userId,i.ssl=n.ssl,i.save(),s.resolve(n)}}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,t,s={}){const r=l(),n=()=>{var e,t,s,r,i;null==(e=h)||e.remove(),null==(t=d)||t.remove(),null==(s=u)||s.remove(),null==(r=a)||r.destroy(),null==(i=this.dialog)||i.destroy(),this.dialog=a=h=d=u=null},o=()=>{n(),this._oAuthDfd=null,r.reject(new i(\"identity-manager:user-aborted\",\"ABORTED\"))};s.signal&&c(s.signal,(()=>{o()}));let a=new this.formConstructor;a.resource=this.getResourceName(e),a.server=t.server,this.dialog=new A,this.dialog.content=a,this.dialog.open=!0,this.emit(\"dialog-create\");let h=a.on(\"cancel\",o),d=this.dialog.watch(\"open\",o),u=a.on(\"submit\",(e=>{this.generateToken(t,e,{isAdmin:s.isAdmin,signal:s.signal}).then((i=>{n();const o=new D({userId:e.username,server:t.server,token:i.token,expires:null!=i.expires?Number(i.expires):null,ssl:!!i.ssl,isAdmin:s.isAdmin,validity:i.validity});r.resolve(o)})).catch((e=>{a.error=e,a.signingIn=!1}))}));return r.promise}oAuthSignIn(e,t,s,r){this._oAuthDfd=l();const n=this._oAuthDfd;null!=r&&r.signal&&c(r.signal,(()=>{const e=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;e&&!e.closed?e.close():this.dialog&&h()})),n.resUrl_=e,n.sinfo_=t,n.oinfo_=s;const o=!r||!1!==r.oAuthPopupConfirmation;if(!s.popup||!o)return this._doOAuthSignIn(e,t,s),n.promise;const a=new this.formConstructor;a.oAuthPrompt=!0,a.server=t.server,this.dialog=new A,this.dialog.content=a,this.dialog.open=!0,this.emit(\"dialog-create\");const h=()=>{_(),this._oAuthDfd=null,n.reject(new i(\"identity-manager:user-aborted\",\"ABORTED\"))},d=a.on(\"cancel\",h),u=this.dialog.watch(\"open\",h),p=a.on(\"submit\",(()=>{_(),this._doOAuthSignIn(e,t,s)})),_=()=>{d.remove(),u.remove(),p.remove(),a.destroy(),this.dialog.destroy(),this.dialog=null};return n.promise}destroyCredentials(){if(this.credentials){this.credentials.slice().forEach((e=>{e.destroy()}))}this.emit(\"credentials-destroy\")}enablePostMessageAuth(e=\"https://www.arcgis.com/sharing/rest\"){this._postMessageAuthHandle&&this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=o(window,\"message\",(t=>{var s;if((t.origin===this._appOrigin||t.origin.endsWith(\".arcgis.com\"))&&\"arcgis:auth:requestCredential\"===(null==(s=t.data)?void 0:s.type)){const s=t.source;this.getCredential(e).then((e=>{s.postMessage({type:\"arcgis:auth:credential\",credential:{expires:e.expires,server:e.server,ssl:e.ssl,token:e.token,userId:e.userId}},t.origin)})).catch((e=>{s.postMessage({type:\"arcgis:auth:error\",error:{name:e.name,message:e.message}},t.origin)}))}}))}disablePostMessageAuth(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)}_getOAuthHash(){let e=window.location.hash;if(e){\"#\"===e.charAt(0)&&(e=e.substring(1));const t=g(e);let s=!1;if(t.access_token&&t.expires_in&&t.state&&t.hasOwnProperty(\"username\"))try{t.state=JSON.parse(t.state),\"object\"==typeof t.state&&t.state.portalUrl&&(this._oAuthHash=t,s=!0)}catch{}else t.error&&t.error_description&&(console.log(\"IdentityManager OAuth Error: \",t.error,\" - \",t.error_description),\"access_denied\"===t.error&&(s=!0));s&&(window.location.hash=\"object\"==typeof t.state&&t.state.hash||\"\")}}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const e=new i(\"identity-manager:user-aborted\",\"ABORTED\");this._errbackFunc(e)}}_findCredential(e,t){let s,r,i,n,o=-1;const a=t&&t.token,h=t&&t.resource,l=this._isServerRsrc(e)?\"server\":\"portal\",c=this.credentials.filter((t=>this._hasSameServerInstance(t.server,e)&&t.scope===l));if(e=h||e,c.length)if(1===c.length){if(s=c[0],n=this.findServerInfo(s.server),r=n&&n.owningSystemUrl,i=r&&this.findCredential(r,s.userId),o=this._getIdenticalSvcIdx(e,s),!a)return-1===o&&s.resources.push(e),this._addResource(e,i),s;-1!==o&&(s.resources.splice(o,1),this._removeResource(e,i))}else{let t,s;if(c.some((a=>(s=this._getIdenticalSvcIdx(e,a),-1!==s&&(t=a,n=this.findServerInfo(t.server),r=n&&n.owningSystemUrl,i=r&&this.findCredential(r,t.userId),o=s,!0)))),a)t&&(t.resources.splice(o,1),this._removeResource(e,i));else if(t)return this._addResource(e,i),t}}_findOAuthInfo(e){let t=this.findOAuthInfo(e);if(!t)for(const s of this.oAuthInfos)if(this._isIdProvider(s.portalUrl,e)){t=s;break}return t}_addResource(e,t){t&&-1===this._getIdenticalSvcIdx(e,t)&&t.resources.push(e)}_removeResource(e,t){let s=-1;t&&(s=this._getIdenticalSvcIdx(e,t),s>-1&&t.resources.splice(s,1))}_useProxy(e,t){return t&&t.isAdmin&&!_(e.adminTokenServiceUrl,this._appOrigin)||!this._isPortalDomain(e.tokenServiceUrl)&&\"10.1\"===String(e.currentVersion)&&!_(e.tokenServiceUrl,this._appOrigin)}_getOrigin(e){const t=new u(e);return t.scheme+\"://\"+t.host+(null!=t.port?\":\"+t.port:\"\")}_getServerInstanceRoot(e){const t=e.toLowerCase();let s=t.indexOf(this._agsRest);return-1===s&&this._isAdminResource(e)&&(s=this._agsAdmin.test(e)?e.replace(this._agsAdmin,\"$1\").length:e.search(this._adminSvcs)),-1===s&&(s=t.indexOf(\"/sharing\")),-1===s&&\"/\"===t.substr(-1)&&(s=t.length-1),s>-1?e.substring(0,s):e}_hasSameServerInstance(e,t){return\"/\"===e.substr(-1)&&(e=e.slice(0,-1)),e=e.toLowerCase(),t=this._getServerInstanceRoot(t).toLowerCase(),e=this._normalizeAGOLorgDomain(e),t=this._normalizeAGOLorgDomain(t),(e=e.substr(e.indexOf(\":\")))===(t=t.substr(t.indexOf(\":\")))}_normalizeAGOLorgDomain(e){const t=/^https?:\\/\\/(?:cdn|[a-z\\d-]+\\.maps)\\.arcgis\\.com/i,s=/^https?:\\/\\/(?:cdndev|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,r=/^https?:\\/\\/(?:cdnqa|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i;return t.test(e)?e=e.replace(t,\"https://www.arcgis.com\"):s.test(e)?e=e.replace(s,\"https://devext.arcgis.com\"):r.test(e)&&(e=e.replace(r,\"https://qaext.arcgis.com\")),e}_sanitizeUrl(e){const s=(t.request.proxyUrl||\"\").toLowerCase(),r=s?e.toLowerCase().indexOf(s+\"?\"):-1;return-1!==r&&(e=e.substring(r+s.length+1)),e=f(e),p(e).path}_isRESTService(e){return e.indexOf(this._agsRest)>-1}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,t){let s;if(this._isRESTService(e)&&this._isRESTService(t)){const r=this._getSuffix(e).toLowerCase(),i=this._getSuffix(t).toLowerCase();if(s=r===i,!s){const e=/(.*)\\/(MapServer|FeatureServer|UtilityNetworkServer).*/gi;s=r.replace(e,\"$1\")===i.replace(e,\"$1\")}}else this._isAdminResource(e)&&this._isAdminResource(t)?s=!0:this._isServerRsrc(e)||this._isServerRsrc(t)||!this._isPortalDomain(e)||(s=!0);return s}_isPortalDomain(e){const s=new u(e.toLowerCase()),r=this._portalConfig;let i=this._gwDomains.some((e=>e.regex.test(s.uri)));return!i&&r&&(i=this._hasSameServerInstance(this._getServerInstanceRoot(r.restBaseUrl),s.uri)),i||t.portalUrl&&(i=_(s,t.portalUrl,!0)),i||(i=this._portals.some((e=>this._hasSameServerInstance(e,s.uri)))),i=i||this._agsPortal.test(s.path),i}_isIdProvider(e,t){let s=-1,r=-1;this._gwDomains.forEach(((i,n)=>{-1===s&&i.regex.test(e)&&(s=n),-1===r&&i.regex.test(t)&&(r=n)}));let i=!1;if(s>-1&&r>-1&&(0===s||4===s?0!==r&&4!==r||(i=!0):1===s?1!==r&&2!==r||(i=!0):2===s?2===r&&(i=!0):3===s&&3===r&&(i=!0)),!i){const s=this.findServerInfo(t),r=s&&s.owningSystemUrl;r&&O(s)&&this._isPortalDomain(r)&&this._isIdProvider(e,r)&&(i=!0)}return i}_getIdenticalSvcIdx(e,t){let s=-1;for(let r=0;r<t.resources.length;r++){const i=t.resources[r];if(this._isIdenticalService(e,i)){s=r;break}}return s}_getSuffix(e){return e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"$1\")}_getTokenSvcUrl(e){let t,s,i;if(this._isRESTService(e)||this._isAdminResource(e)){const i=this._getServerInstanceRoot(e);return t=i+\"/admin/generateToken\",s=r(e=i+\"/rest/info\",{query:{f:\"json\"}}).then((e=>e.data)),{adminUrl:t,promise:s}}if(this._isPortalDomain(e)){let t=\"\";if(this._gwDomains.some((s=>(s.regex.test(e)&&(t=s.tokenServiceUrl),!!t))),t||this._portals.some((s=>(this._hasSameServerInstance(s,e)&&(t=s+this._gwTokenUrl),!!t))),t||(i=e.toLowerCase().indexOf(\"/sharing\"),-1!==i&&(t=e.substring(0,i)+this._gwTokenUrl)),t||(t=this._getOrigin(e)+this._gwTokenUrl),t){const s=new u(e).port;/^http:\\/\\//i.test(e)&&\"7080\"===s&&(t=t.replace(/:7080/i,\":7443\")),t=t.replace(/http:/i,\"https:\")}return t}if(-1!==e.toLowerCase().indexOf(\"premium.arcgisonline.com\"))return\"https://premium.arcgisonline.com/server/tokens\"}_exchangeToken(e,t,s){return r(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:\"anonymous\",method:\"post\",query:{f:\"json\",client_id:t,token:s}}).then((e=>e.data.token))}_getPlatformSelf(e,t){return e=e.replace(/^http:/i,\"https:\"),r(`${e}/sharing/rest/oauth2/platformSelf`,{authMode:\"anonymous\",headers:{\"X-Esri-Auth-Client-Id\":t,\"X-Esri-Auth-Redirect-Uri\":window.location.href.replace(/#.*$/,\"\")},method:\"post\",query:{f:\"json\"},withCredentials:!0}).then((e=>e.data))}_getPortalSelf(e,t){let s;if(this._gwDomains.some((t=>(t.regex.test(e)&&(s=t.customBaseUrl),!!s))),s)return Promise.resolve({allSSL:!0,currentVersion:\"4.4\",customBaseUrl:s,portalMode:\"multitenant\",supportsOAuth:!0});this._appOrigin.startsWith(\"https:\")?e=e.replace(/^http:/i,\"https:\").replace(/:7080/i,\":7443\"):/^http:/i.test(t)&&(e=e.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\"));return r(e,{query:{f:\"json\"},authMode:\"anonymous\",withCredentials:!0}).then((e=>e.data))}_doPortalSignIn(e){const t=this._portalConfig,s=window.location.href,r=this.findServerInfo(e);return!(!t&&!this._isPortalDomain(s)||!(r?r.hasPortal||r.owningSystemUrl&&this._isPortalDomain(r.owningSystemUrl):this._isPortalDomain(e))||!(this._isIdProvider(s,e)||t&&(this._hasSameServerInstance(this._getServerInstanceRoot(t.restBaseUrl),e)||this._isIdProvider(t.restBaseUrl,e))||_(s,e,!0)))}_checkProtocol(e,t,s,r){let n=!0;const o=r?t.adminTokenServiceUrl:t.tokenServiceUrl;if(o.trim().toLowerCase().startsWith(\"https:\")&&!this._appOrigin.startsWith(\"https:\")&&m(o)&&(n=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:t}),!n)){s(new i(\"identity-manager:aborted\",\"Aborted the Sign-In process to avoid sending password over insecure connection.\"))}return n}_enqueue(e,t,s,r,i,n){return r||(r=l()),r.resUrl_=e,r.sinfo_=t,r.options_=s,r.admin_=i,r.refresh_=n,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(r)):this._xoReqs.push(r):this._doSignIn(r),r.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const t=t=>{const s=e.options_&&e.options_.resource,r=e.resUrl_,i=e.refresh_;let n=!1;-1===this.credentials.indexOf(t)&&(i&&-1!==this.credentials.indexOf(i)?(i.userId=t.userId,i.token=t.token,i.expires=t.expires,i.validity=t.validity,i.ssl=t.ssl,i.creationTime=t.creationTime,n=!0,t=i):this.credentials.push(t)),t.resources||(t.resources=[]),t.resources.push(s||r),t.scope=this._isServerRsrc(r)?\"server\":\"portal\",t.emitTokenChange();const o=this._soReqs,a={};this._soReqs=[],o.forEach((e=>{if(!this._isIdenticalService(r,e.resUrl_)){const s=this._getSuffix(e.resUrl_);a[s]||(a[s]=!0,t.resources.push(e.resUrl_))}})),e.resolve(t),o.forEach((e=>{this._hasSameServerInstance(this._getServerInstanceRoot(r),e.resUrl_)?e.resolve(t):this._soReqs.push(e)})),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,n||this.emit(\"credential-create\",{credential:t}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},s=t=>{e.reject(t),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},r=(r,n,a,h)=>{var l,d;const u=e.sinfo_,p=!e.options_||!1!==e.options_.prompt,g=u.hasPortal&&this._findOAuthInfo(e.resUrl_);let f,m;if(r)t(new D({userId:r,server:u.server,token:a||null,expires:null!=h?Number(h):null,ssl:!!n}));else if(window!==window.parent&&null!=(l=this._appUrlObj.query)&&l[\"arcgis-auth-origin\"]&&null!=(d=this._appUrlObj.query)&&d[\"arcgis-auth-portal\"]&&this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query[\"arcgis-auth-portal\"]),e.resUrl_)){var v;window.parent.postMessage({type:\"arcgis:auth:requestCredential\"},this._appUrlObj.query[\"arcgis-auth-origin\"]);const r=o(window,\"message\",(e=>{e.source===window.parent&&e.data&&(\"arcgis:auth:credential\"===e.data.type?(r.remove(),e.data.credential.expires<Date.now()?s(new i(\"identity-manager:credential-request-failed\",\"Parent application's token has expired.\")):t(new D(e.data.credential))):\"arcgis:auth:error\"===e.data.type&&(r.remove(),\"tokenExpiredError\"===e.data.error.name?s(new i(\"identity-manager:credential-request-failed\",\"Parent application's token has expired.\")):s(i.fromJSON(e.data.error))))}));c(null==(v=e.options_)?void 0:v.signal,(()=>{r.remove()}))}else if(g){let r=g._oAuthCred;if(!r){const e=new y(g,b),t=new y(g,P);e.isValid()&&t.isValid()?e.expires>t.expires?(r=e,t.destroy()):(r=t,e.destroy()):r=e.isValid()?e:t,g._oAuthCred=r}if(r.isValid())f=new D({userId:r.userId,server:u.server,token:r.token,expires:r.expires,ssl:r.ssl,_oAuthCred:r}),g.appId!==r.appId&&this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._exchangeToken(f.server,g.appId,f.token).then((e=>{f.token=e,r.token=e,r.save(),t(f)})).catch((()=>{t(f)})):t(f);else if(this._oAuthHash&&this._hasSameServerInstance(g.portalUrl,this._oAuthHash.state.portalUrl)){const e=this._oAuthHash;f=new D({userId:e.username,server:u.server,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:\"true\"===e.ssl,oAuthState:e.state,_oAuthCred:r}),g.userId=f.userId,r.storage=e.persist?b:P,r.token=f.token,r.expires=f.expires,r.userId=f.userId,r.ssl=f.ssl,r.save(),this._oAuthHash=null,t(f)}else{const r=()=>{p?e._pendingDfd=this.oAuthSignIn(e.resUrl_,u,g,e.options_).then(t,s):(m=new i(\"identity-manager:not-authenticated\",\"User is not signed in.\"),s(m))};this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._getPlatformSelf(u.server,g.appId).then((({portalUrl:e,token:s,username:i})=>{!e||_(e,this._appOrigin,!0)?(f=new D({server:u.server,userId:i,token:s}),t(f)):r()})).catch(r):r()}}else if(p){if(this._checkProtocol(e.resUrl_,u,s,e.admin_)){let r=e.options_;e.admin_&&(r=r||{},r.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,u,r).then(t,s)}}else m=new i(\"identity-manager:not-authenticated\",\"User is not signed in.\"),s(m)},n=()=>{const r=e.sinfo_,i=r.owningSystemUrl,n=e.options_;let o,a,h,l;if(n&&(o=n.token,a=n.error,h=n.prompt),l=this._findCredential(i,{token:o,resource:e.resUrl_}),!l)for(const e of this.credentials)if(this._isIdProvider(i,e.server)){l=e;break}if(l){const i=this.findCredential(e.resUrl_,l.userId);if(i)t(i);else if(R(r,this._legacyFed)){const e=l.toJSON();e.server=r.server,e.resources=null,t(new D(e))}else{(e._pendingDfd=this.generateToken(this.findServerInfo(l.server),null,{serverUrl:e.resUrl_,token:l.token,signal:e.options_.signal,ssl:l.ssl})).then((s=>{t(new D({userId:l.userId,server:r.server,token:s.token,expires:null!=s.expires?Number(s.expires):null,ssl:!!s.ssl,isAdmin:e.admin_,validity:s.validity}))}),s)}}else{this._busy=null,o&&(e.options_.token=null);(e._pendingDfd=this.getCredential(i.replace(/\\/?$/,\"/sharing\"),{resource:e.resUrl_,owningTenant:r.owningTenant,signal:e.options_.signal,token:o,error:a,prompt:h})).then((()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)}),(t=>{e.resUrl_=e.sinfo_=e.refresh_=null,e.reject(t)}))}};this._errbackFunc=s;const a=e.sinfo_.owningSystemUrl,l=this._isServerRsrc(e.resUrl_),d=e.sinfo_._restInfoPms;d?d.promise.then((t=>{const s=e.sinfo_;if(s._restInfoPms){s.adminTokenServiceUrl=s._restInfoPms.adminUrl,s._restInfoPms=null,s.tokenServiceUrl=h(\"authInfo.tokenServicesUrl\",t)||h(\"authInfo.tokenServiceUrl\",t)||h(\"tokenServiceUrl\",t),s.shortLivedTokenValidity=h(\"authInfo.shortLivedTokenValidity\",t),s.currentVersion=t.currentVersion,s.owningTenant=t.owningTenant;const e=s.owningSystemUrl=t.owningSystemUrl;e&&this._portals.push(e)}l&&s.owningSystemUrl?n():r()}),(()=>{e.sinfo_._restInfoPms=null;const t=new i(\"identity-manager:server-identification-failed\",\"Unknown resource - could not find token service endpoint.\");s(t)})):l&&a?n():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then((t=>{const s={};let r,i,n,o;return t&&(r=t.user&&t.user.username,s.username=r,s.allSSL=t.allSSL,i=t.supportsOAuth,n=t.currentVersion,\"multitenant\"===t.portalMode&&(o=t.customBaseUrl)),e.sinfo_.webTierAuth=!!r,r&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:s.allSSL}).catch((()=>null)).then((e=>(s.portalToken=e&&e.token,s.tokenExpiration=e&&e.expires,s))):!r&&i&&parseFloat(n)>=4.4&&!this._findOAuthInfo(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:o,owningTenant:e.sinfo_._selfReq.owningTenant}).catch((()=>null)).then((()=>s)):s})).catch((()=>null)).then((t=>{e.sinfo_._selfReq=null,t?r(t.username,t.allSSL,t.portalToken,t.tokenExpiration):r()})):r()}_generateOAuthInfo(e){let t,s,i=e.portalUrl;const n=e.customBaseUrl,o=e.owningTenant,a=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(a){s=window.location.href;let e=s.indexOf(\"?\");e>-1&&(s=s.slice(0,e)),e=s.search(/\\/(apps|home)\\//),s=e>-1?s.slice(0,e):null}return a&&s?(this._hasTestedIfAppIsOnPortal=!0,t=r(s+\"/sharing/rest\",{query:{f:\"json\"}}).then((()=>{this.defaultOAuthInfo=new U({appId:\"arcgisonline\",popupCallbackUrl:s+\"/home/oauth-callback.html\"})}))):t=Promise.resolve(),t.then((()=>{if(this.defaultOAuthInfo)return i=i.replace(/^http:/i,\"https:\"),r(i+\"/sharing/rest/oauth2/validateRedirectUri\",{query:{accountId:o,client_id:this.defaultOAuthInfo.appId,redirect_uri:v(this.defaultOAuthInfo.popupCallbackUrl),f:\"json\"}}).then((e=>{if(e.data.valid){const t=this.defaultOAuthInfo.clone();e.data.urlKey&&n?t.portalUrl=\"https://\"+e.data.urlKey.toLowerCase()+\".\"+n:t.portalUrl=i,t.popup=window!==window.top||!(_(i,this._appOrigin)||this._gwDomains.some((e=>e.regex.test(i)&&e.regex.test(this._appOrigin)))),this.oAuthInfos.push(t)}}))}))}_doOAuthSignIn(e,t,s){const r={portalUrl:s.portalUrl};!s.popup&&s.preserveUrlHash&&window.location.hash&&(r.hash=window.location.hash);const n={client_id:s.appId,response_type:\"token\",state:JSON.stringify(r),expiration:s.expiration,locale:s.locale,redirect_uri:s.popup?v(s.popupCallbackUrl):window.location.href.replace(/#.*$/,\"\")};s.forceLogin&&(n.force_login=!0),s.forceUserId&&s.userId&&(n.prepopulatedusername=s.userId),!s.popup&&this._doPortalSignIn(e)&&(n.redirectToUserOrgUrl=!0);const a=s.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/oauth2/authorize\",h=a+\"?\"+S(n);if(s.popup){const e=window.open(h,\"esriJSAPIOAuth\",s.popupWindowFeatures);if(e)e.focus(),this._oAuthDfd.oAuthWin_=e,this._oAuthIntervalId=setInterval((()=>{if(e.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnHashHandle.remove();const e=this._oAuthDfd;if(e){const t=new i(\"identity-manager:user-aborted\",\"ABORTED\");e.reject(t)}}}),500),this._oAuthOnHashHandle=o(window,\"arcgis:auth:hash\",(e=>{this.setOAuthResponseHash(e.detail)}));else{const e=new i(\"identity-manager:popup-blocked\",\"ABORTED\");this._oAuthDfd.reject(e)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:n,authorizeUrl:a,resourceUrl:e,serverInfo:t,oAuthInfo:s}):window.location.href=h}}C.prototype.declaredClass=\"esri.identity.IdentityManagerBase\";let D=class extends n.EventedAccessor{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e&&e._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],null==this.creationTime&&(this.creationTime=Date.now())}refreshToken(){const e=s.findServerInfo(this.server),t=e&&e.owningSystemUrl,r=!!t&&\"server\"===this.scope,i=r&&R(e,s._legacyFed),n=e.webTierAuth,o=n&&s.normalizeWebTierAuth,a=T[this.server],h=a&&a[this.userId];let l,c=this.resources&&this.resources[0],d=r&&s.findServerInfo(t),u={username:this.userId,password:h};if(n&&!o)return;r&&!d&&s.serverInfos.some((e=>(s._isIdProvider(t,e.server)&&(d=e),!!d)));const p=d&&s.findCredential(d.server,this.userId);if(!r||p){if(!i){if(r)l={serverUrl:c,token:p&&p.token,ssl:p&&p.ssl};else if(o)u=null,l={ssl:this.ssl};else{if(!h){let t;return c&&(c=s._sanitizeUrl(c),this._enqueued=1,t=s._enqueue(c,e,null,null,this.isAdmin,this),t.then((()=>{this._enqueued=0,this.refreshServerTokens()})).catch((()=>{this._enqueued=0}))),t}this.isAdmin&&(l={isAdmin:!0})}return s.generateToken(r?d:e,r?null:u,l).then((e=>{this.token=e.token,this.expires=null!=e.expires?Number(e.expires):null,this.creationTime=Date.now(),this.validity=e.validity,this.emitTokenChange(),this.refreshServerTokens()})).catch((()=>{}))}p.refreshToken()}}refreshServerTokens(){\"portal\"===this.scope&&s.credentials.forEach((e=>{const t=s.findServerInfo(e.server),r=t&&t.owningSystemUrl;e!==this&&e.userId===this.userId&&r&&\"server\"===e.scope&&(s._hasSameServerInstance(this.server,r)||s._isIdProvider(r,this.server))&&(R(t,s._legacyFed)?(e.token=this.token,e.expires=this.expires,e.creationTime=this.creationTime,e.validity=this.validity,e.emitTokenChange()):e.refreshToken())}))}emitTokenChange(e){clearTimeout(this._refreshTimer);const t=this.server&&s.findServerInfo(this.server),r=t&&t.owningSystemUrl,i=r&&s.findServerInfo(r);!1===e||r&&\"portal\"!==this.scope&&(!i||!i.webTierAuth||s.normalizeWebTierAuth)||null==this.expires&&null==this.validity||this._startRefreshTimer(),this.emit(\"token-change\")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=s.credentials.indexOf(this);e>-1&&s.credentials.splice(e,1),this.emitTokenChange(),this.emit(\"destroy\")}toJSON(){const e=a({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),t=this.resources;return t&&t.length>0&&(e.resources=t.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer,t=2**31-1;let s=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();s<0?s=0:s>t&&(s=t),this._refreshTimer=setTimeout(this.refreshToken.bind(this),s>e?s-e:s)}};e([w()],D.prototype,\"creationTime\",void 0),e([w()],D.prototype,\"expires\",void 0),e([w()],D.prototype,\"isAdmin\",void 0),e([w()],D.prototype,\"oAuthState\",void 0),e([w()],D.prototype,\"resources\",void 0),e([w()],D.prototype,\"scope\",void 0),e([w()],D.prototype,\"server\",void 0),e([w()],D.prototype,\"ssl\",void 0),e([w()],D.prototype,\"token\",void 0),e([w()],D.prototype,\"tokenRefreshBuffer\",void 0),e([w()],D.prototype,\"userId\",void 0),e([w()],D.prototype,\"validity\",void 0),D=e([I(\"esri.identity.Credential\")],D);export{D as Credential,C as IdentityManagerBase};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{setId as e}from\"../kernel.js\";import{IdentityManagerBase as t}from\"./IdentityManagerBase.js\";class r extends t{}r.prototype.declaredClass=\"esri.identity.IdentityManager\";const s=new r;e(s);export{s as default};\n"],"sourceRoot":""}